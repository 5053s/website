{{ define "main" }}
<!-- TODO: Optimize templates for scalability -->
{{ $pages := (.Sections | union .Pages).ByWeight }}
<!-- {{ $pagesSortedByLastName := ($pages.ByParam "lastName") }} -->
<!-- Hero -->
{{ partial "content/hero/_index.html" . }}
<!-- Page -->
<section class="section page">
  <div class="container">
    <!-- Breadcrumbs -->
    {{ partial "content/breadcrumbs.html" . }}
    <!-- Content -->
    {{ partial "content/_index.html" . }}
    <div class="content mt-2">
      <h2>Bay Area</h2>
    </div>
    <div class="columns is-multiline">
      {{ range $pages }}
      {{ if eq .Params.location "Bay Area" }}
      {{ partial "content/children/child.html" . }}
      {{ end }}
      {{ end }}
    </div>
    <div class="content mt-2">
      <h2>New York City</h2>
    </div>
    <div class="columns is-multiline">
      {{ range $pages }}
      {{ if eq .Params.location "New York City" }}
      {{ partial "content/children/child.html" . }}
      {{ end }}
      {{ end }}
    </div>
    <div class="content mt-2">
      <h2>Los Angeles</h2>
    </div>
    <!-- Los Angeles - Children Pages -->
    <div class="columns is-multiline">
      {{ range $pages }}
      {{ if eq .Params.location "Los Angeles" }}
      {{ partial "content/children/child.html" . }}
      {{ end }}
      {{ end }}
    </div>
    <div class="content mt-2">
      <h2>Austin</h2>
    </div>
    <!-- Austin - Children Pages -->
    <div class="columns is-multiline">
      {{ range $pagesSortedByLastName }}
      {{ if eq .Params.location "Austin" }}
      {{ partial "content/children/child.html" . }}
      {{ end }}
      {{ end }}
    </div>
    <div class="content mt-2">
      <h2>Developers</h2>
      <p>We get a lot of help from the open source community - you can see <a href="https://github.com/techqueria/website/graphs/contributors" rel="noopener" target="_blank">view our website contributors</a> on our GitHub repo.</p>
    </div>
    <!-- Content Footer -->
    {{ partial "content/footer/_index.html" . }}
</section>
{{ end }}